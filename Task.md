# Access Key Management and Token Information Retrieval System

## Microservice 1: Access Key Management Service

Objective: This service is responsible for generating access keys for users, defining rate limits, expiration times, and providing administrative capabilities to create or delete keys. Users can retrieve their plan details using their key.

#### Core Features:

- Key Generation: Allows admins to generate access keys for users, specifying request rate limits per minute and key expiration time.

- Admin Commands: Simple commands for administrators to create, delete, and list keys. Also, functionality to update the rate limit or expiration of existing keys.

- User Queries: Enables users to fetch the details of their access plan (rate limit, expiration, etc.) by making an API call with their key and disable the key.

> NOTE: Admin auth happens with JWT token, but there is no need to have auth system

## Microservice 2: Web3 Token Information Service

Objective: This service allows users to fetch token information based on their access keys. It respects the rate limits and expiration times defined in the keys generated by Microservice 1.
(token info can be fetched from coingecko for example. https://www.coingecko.com/)

#### Core Features:

- Token Information Retrieval: Provides an endpoint to fetch token information. The response should be a mock or static data, as the focus is on access control rather than the data itself.
- Rate Limit Enforcement: Checks the user’s request rate against their key’s rate limit. If the rate is exceeded, it returns an error response.
- Key Validation: Verifies if the key is valid and has not expired before allowing access to the token information.
- Logging: Optionally, logs each request for token information, including key used, timestamp, and whether the request was successful or rate-limited.

## Technologies:

-  The only limitation is to use nest.js. besides that you can choose technologies and build the architecture.
- Bonus points for having tests

## Hints:
For optimization you can use data duplication. There is no need to have any http/grpc requests in between the micrservices.
For communication you only need event streaming. Even redis pub sub is good enough if you haven’t worked with any before.


### Few key pointers:
1. Whole communication can be asynchronous. There isn’t a need for any api calls in between the microservices
2. Microservices shouldn’t reuse the same db connections
3. Don’t implement auth. Imagine you have gateway and handling calls from gateway
4. Write such code on which it’s easy to write tests. This is a very important subject.
5. Variable/function naming is important. Try to write readable and well structured code.
6. Follow rest api principles
7. Implementation should consist of 2 microservices. First microservice generates keys. Second microservice will give the user web3 token information when the user will provide the generated key.
8. Please don’t wrap whole methods in try catch (ofc there are exceptions but mostly they weren’t used well). Find better patterns.
9. Architecture will be very important, Because we are searching for a person who has an understanding of architecture.
10. It will be nice to see a bit of unit and integration tests. (even if it will be for a small part of the application)
